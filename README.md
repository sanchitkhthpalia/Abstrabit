# Smart Bookmark App

A minimal, production-ready **smart bookmark manager** built with **Next.js 14 (App Router)**, **Firebase Authentication (Google OAuth only)**, **Cloud Firestore**, and **Tailwind CSS**. Bookmarks are **private per user** and kept in **real time sync** across all open tabs using Firestore `onSnapshot`.

## Overview

Smart Bookmark App lets authenticated users:

- Sign in with Google only (no email/password).
- Create private bookmarks (title + URL) scoped to their Google account.
- View and delete their own bookmarks.
- See instant real-time updates across tabs (powered by Firestore listeners).
- Use a clean, minimal, responsive UI ready for production.

## Tech Stack

- **Framework**: Next.js 14+ (App Router)
- **Language**: TypeScript
- **Auth**: Firebase Authentication (Google provider only)
- **Database**: Cloud Firestore
- **Realtime**: Firestore `onSnapshot` listeners
- **UI**: Tailwind CSS

## Project Structure

```text
app/
  globals.css
  layout.tsx
  page.tsx
  login/
    page.tsx

components/
  BookmarkForm.tsx
  BookmarkList.tsx
  Navbar.tsx

lib/
  firebase.ts
  auth-context.tsx

public/
  favicon.ico (optional, any standard icon)

types.ts
middleware.ts
package.json
tsconfig.json
next.config.mjs
tailwind.config.js
postcss.config.js
next-env.d.ts
.gitignore
README.md
```

## Firebase Setup

### 1. Create a Firebase project

1. Go to the Firebase console (`https://console.firebase.google.com`).
2. Click **Add project** and follow the steps.
3. After creation, open the project.

### 2. Create a Web app and get config

1. In the project, go to **Project settings → General → Your apps**.
2. Click the Web icon (</>) to create a web app.
3. Name it (e.g. `smart-bookmark-web`).
4. After creation, Firebase will show a config object like:

```js
const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "your-project-id.firebaseapp.com",
  projectId: "your-project-id",
  storageBucket: "your-project-id.appspot.com",
  messagingSenderId: "1234567890",
  appId: "1:1234567890:web:abc123"
};
```

5. You’ll need these values for environment variables.

### 3. Enable Firestore

1. In Firebase console, go to **Build → Firestore Database**.
2. Click **Create database**.
3. Start in **Production mode**.
4. Choose a location and finish.

## Enabling Google OAuth

1. In Firebase console, go to **Build → Authentication → Sign-in method**.
2. Click **Get started** if Authentication is not already enabled.
3. Under **Sign-in providers**, click **Google**.
4. Enable the Google provider:
   - Set the **Support email**.
   - Optionally set a display name and logo.
5. Click **Save**.

The app uses `signInWithPopup` with the Google provider and does not support email/password or other providers.

## Firestore Database Structure

Collection: `bookmarks`

Each document:

```json
{
  "id": "auto-generated by Firestore",
  "title": "string",
  "url": "string",
  "userId": "string (Firebase Auth UID)",
  "createdAt": "serverTimestamp()"
}
```

## Firestore Security Rules

Use these rules to ensure data is private and properly scoped:

```txt
rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    match /bookmarks/{bookmarkId} {
      // Users must be authenticated for any access
      allow read, create, delete: if request.auth != null && isOwner();

      function isOwner() {
        // Existing documents (read/delete) must belong to the caller
        // For creates, requested userId must match caller's UID
        return (
          (resource.data.userId == request.auth.uid) &&
          (request.method != 'create' || request.resource.data.userId == request.auth.uid)
        );
      }
    }
  }
}
```

These rules guarantee:

- Users can only read their own bookmarks (`userId == request.auth.uid`).
- Users can only create bookmarks with their own `userId`.
- Users can only delete their own bookmarks.

## Environment Variables

Create `.env.local` in the project root:

```env
NEXT_PUBLIC_FIREBASE_API_KEY=YOUR_API_KEY
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project-id.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-project-id.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=1234567890
NEXT_PUBLIC_FIREBASE_APP_ID=1:1234567890:web:abc123
```

These are used in `lib/firebase.ts` to initialize the Firebase app.

## How Realtime Works

- The app uses Firestore’s realtime listeners (`onSnapshot`) scoped to the authenticated user.
- In `BookmarkList`, it subscribes to documents in `bookmarks` where `userId == currentUser.uid`, ordered by `createdAt` descending.
- Any create/delete on matching documents will trigger an update to all open tabs listening on that query.

## Running Locally

1. Install dependencies:

```bash
npm install
```

2. Create `.env.local` with your Firebase config (see above).

3. Run the dev server:

```bash
npm run dev
```

4. Visit `http://localhost:3000`:
   - If not logged in, you’ll be redirected to `/login`.
   - Click **“Continue with Google”** and complete the OAuth flow.
   - You’ll be redirected back to `/` (home page).

## Deployment to Vercel

1. Push your code to a Git repository (GitHub/GitLab/Bitbucket).
2. Go to `https://vercel.com`, create an account, and click **New Project**.
3. Import your repository.
4. In the project settings on Vercel, under **Environment Variables**, add:

```text
NEXT_PUBLIC_FIREBASE_API_KEY=YOUR_API_KEY
NEXT_PUBLIC_FIREBASE_AUTH_DOMAIN=your-project-id.firebaseapp.com
NEXT_PUBLIC_FIREBASE_PROJECT_ID=your-project-id
NEXT_PUBLIC_FIREBASE_STORAGE_BUCKET=your-project-id.appspot.com
NEXT_PUBLIC_FIREBASE_MESSAGING_SENDER_ID=1234567890
NEXT_PUBLIC_FIREBASE_APP_ID=1:1234567890:web:abc123
```

5. Click **Deploy**.
6. Once deployed, visit the Vercel URL and test:
   - Google login.
   - Adding bookmarks.
   - Deleting bookmarks.
   - Realtime updates across tabs.

## Production Readiness

- Next.js 14 App Router, using the `app/` directory.
- TypeScript with strict mode.
- Google-only login via Firebase Auth.
- Firestore rules restrict access to user-owned data only.
- Clean, minimal Tailwind-based UI with responsive layout.
- Fully compatible with Vercel (`npm run build` succeeds when env vars are set).

